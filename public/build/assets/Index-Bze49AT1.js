import{r as $,l as G,C as N,c,o as m,a as s,u as e,m as H,w as a,b as n,d as o,e as P,f as w,F as M,g as J,t as u,n as K,h as R,i as E,v as X,j as Y,k as Z,W as V}from"./app-DnTcrpB6.js";import{_ as ee}from"./AuthenticatedLayout-CwuqOKGZ.js";import{_ as se,a as A}from"./CardContent-BQMasyCA.js";import{_ as C}from"./Label-BK7sQlRS.js";import{_ as v}from"./index-CX4v1Cno.js";import{_ as te,a as ae,b as le,c as re,d as oe}from"./DialogTitle-BDYYDwYM.js";import{_ as ie,a as ne,b as U,c as x,d as de,e as g,T as ue}from"./TableHeader-ByilCfW7.js";import{_ as fe,a as me,b as ce}from"./CardTitle-BfHsAZSZ.js";import{_ as pe}from"./CardDescription-BuaRJSkt.js";import{_ as _e}from"./CardFooter-BJWIlOkJ.js";import{_ as j}from"./index-CAC7I7Hq.js";import{U as ve}from"./user-plus-1iOWfSrV.js";import{S as ge}from"./search-C_i2Tzqa.js";import{A as be,a as we}from"./arrow-up-2pCKX_xq.js";import{I as xe}from"./image-BnCleUiO.js";import{S as ye}from"./square-pen-CBPfsNs9.js";import"./utils-BRMhMjhB.js";import"./useForwardExpose-CK3t8wEI.js";import"./ApplicationLogo-DiAn-YKi.js";import"./chevron-down-Do_K_bxr.js";import"./createLucideIcon-Cya5IPhA.js";import"./user-CbmT-neK.js";import"./mail-CiA3hdT8.js";import"./x-D6JCrKfh.js";import"./chevron-right-CNyHu8xf.js";const he={class:"flex justify-between items-center"},ke={class:"relative mb-6"},$e={class:"rounded-md border"},Ce={class:"flex items-center gap-2"},Se={class:"flex flex-col"},Ie={class:"w-12 h-12 rounded-md overflow-hidden"},Ve=["src","alt"],Ae={key:1,class:"w-full h-full bg-gray-100 flex items-center justify-center"},Ue={class:"flex justify-end gap-2"},De={class:"text-sm text-gray-500"},Ne={class:"grid gap-4 py-4"},Pe={class:"grid gap-2"},Me={key:0,class:"text-sm text-red-500"},Ee={class:"grid gap-2"},je={key:0,class:"text-sm text-red-500"},ze={class:"grid gap-2"},Fe={key:0,class:"text-sm text-red-500"},Le={key:0,class:"grid gap-2"},Te={key:0,class:"text-sm text-red-500"},ms={__name:"Index",props:{partnerships:Array},setup(z){const y=z,h=$(""),f=$([]),F=()=>{h.value?f.value=y.partnerships.filter(i=>{var t;return i.name.toLowerCase().includes(h.value.toLowerCase())||((t=i.description)==null?void 0:t.toLowerCase().includes(h.value.toLowerCase()))}):f.value=y.partnerships};G(()=>{f.value=y.partnerships});const p=$(!1),b=$(!1),l=N({id:null,name:"",description:"",image:null,is_active:!0}),k=()=>{l.reset(),l.clearErrors()},L=()=>{k(),b.value=!1,p.value=!0},T=i=>{k(),b.value=!0,l.id=i.id,l.name=i.name,l.description=i.description,l.is_active=i.is_active,p.value=!0},B=i=>{l.image=i.target.files[0]},q=()=>{b.value?l.post(route("partnerships.update",l.id),{preserveScroll:!0,onSuccess:()=>{p.value=!1,k(),V.visit(route("partnerships.index"),{only:["partnerships"]})}}):l.post(route("partnerships.store"),{preserveScroll:!0,onSuccess:()=>{p.value=!1,k(),V.visit(route("partnerships.index"),{only:["partnerships"]})}})},W=i=>{confirm("Are you sure you want to delete this partnership?")&&N().delete(route("partnerships.destroy",i),{preserveScroll:!0,onSuccess:()=>{V.visit(route("partnerships.index"),{only:["partnerships"]})}})},D=async(i,t)=>{if(t==="up"&&i===0||t==="down"&&i===f.value.length-1)return;const r=t==="up"?i-1:i+1,d=[...f.value],_=d[i],S=d[r],O=_.order;_.order=S.order,S.order=O,d[i]=S,d[r]=_,f.value=d;try{await Z.put(route("partnerships.reorder"),{items:d.map((I,Q)=>({id:I.id,order:Q}))})}catch(I){console.error("Failed to update order:",I),f.value=y.partnerships}};return(i,t)=>(m(),c(M,null,[s(e(H),{title:"Partnerships Management"}),s(ee,null,{default:a(()=>[s(e(fe),null,{default:a(()=>[s(e(me),{class:"pb-3"},{default:a(()=>[n("div",he,[n("div",null,[s(e(ce),{class:"text-2xl"},{default:a(()=>t[6]||(t[6]=[o("Partnerships Management")])),_:1}),s(e(pe),null,{default:a(()=>t[7]||(t[7]=[o("Manage your partnerships")])),_:1})]),s(e(v),{onClick:L,variant:"default",class:"flex items-center gap-2"},{default:a(()=>[s(e(ve),{class:"w-4 h-4"}),t[8]||(t[8]=o(" Add New "))]),_:1})])]),_:1}),s(e(se),null,{default:a(()=>[n("div",ke,[s(e(ge),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s(e(A),{modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=r=>h.value=r),onInput:F,placeholder:"Search by name or description...",class:"pl-10"},null,8,["modelValue"])]),n("div",$e,[s(e(ie),null,{default:a(()=>[s(e(ne),null,{default:a(()=>[s(e(U),null,{default:a(()=>[s(e(x),{class:"w-4"},{default:a(()=>t[9]||(t[9]=[o("#")])),_:1}),s(e(x),null,{default:a(()=>t[10]||(t[10]=[o("Image")])),_:1}),s(e(x),null,{default:a(()=>t[11]||(t[11]=[o("Name")])),_:1}),s(e(x),null,{default:a(()=>t[12]||(t[12]=[o("Description")])),_:1}),s(e(x),null,{default:a(()=>t[13]||(t[13]=[o("Status")])),_:1}),s(e(x),{class:"text-right"},{default:a(()=>t[14]||(t[14]=[o("Actions")])),_:1})]),_:1})]),_:1}),s(e(de),null,{default:a(()=>[(m(!0),c(M,null,J(f.value,(r,d)=>(m(),P(e(U),{key:r.id},{default:a(()=>[s(e(g),null,{default:a(()=>[n("div",Ce,[s(e(j),{variant:"outline"},{default:a(()=>[o(u(d+1),1)]),_:2},1024),n("div",Se,[s(e(v),{variant:"ghost",size:"icon",class:"h-6 w-6",disabled:d===0,onClick:_=>D(d,"up")},{default:a(()=>[s(e(be),{class:"h-4 w-4"})]),_:2},1032,["disabled","onClick"]),s(e(v),{variant:"ghost",size:"icon",class:"h-6 w-6",disabled:d===f.value.length-1,onClick:_=>D(d,"down")},{default:a(()=>[s(e(we),{class:"h-4 w-4"})]),_:2},1032,["disabled","onClick"])])])]),_:2},1024),s(e(g),null,{default:a(()=>[n("div",Ie,[r.image?(m(),c("img",{key:0,src:r.image,alt:r.name,class:"w-full h-full object-cover"},null,8,Ve)):(m(),c("div",Ae,[s(e(xe),{class:"w-5 h-5 text-gray-400"})]))])]),_:2},1024),s(e(g),{class:"font-medium"},{default:a(()=>[o(u(r.name),1)]),_:2},1024),s(e(g),null,{default:a(()=>[o(u(r.description),1)]),_:2},1024),s(e(g),null,{default:a(()=>[s(e(j),{class:K(r.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800")},{default:a(()=>[o(u(r.is_active?"Active":"Inactive"),1)]),_:2},1032,["class"])]),_:2},1024),s(e(g),{class:"text-right"},{default:a(()=>[n("div",Ue,[s(e(v),{variant:"outline",size:"icon",class:"h-8 w-8",onClick:_=>T(r)},{default:a(()=>[s(e(ye),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),s(e(v),{variant:"outline",size:"icon",class:"h-8 w-8 text-red-500",onClick:_=>W(r.id)},{default:a(()=>[s(e(ue),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128)),f.value.length===0?(m(),P(e(U),{key:0},{default:a(()=>[s(e(g),{colspan:"7",class:"text-center py-8 text-gray-500"},{default:a(()=>t[15]||(t[15]=[o(" No partnerships found. Try a different search or add a new partnership. ")])),_:1})]),_:1})):w("",!0)]),_:1})]),_:1})])]),_:1}),s(e(_e),null,{default:a(()=>[n("div",De," Showing "+u(f.value.length)+" out of "+u(y.partnerships.length)+" partnerships ",1)]),_:1})]),_:1}),s(e(te),{open:p.value,"onUpdate:open":t[5]||(t[5]=r=>p.value=r)},{default:a(()=>[s(e(ae),{class:"max-w-xl"},{default:a(()=>[s(e(le),null,{default:a(()=>[s(e(re),null,{default:a(()=>[o(u(b.value?"Edit Partnership":"Add New Partnership"),1)]),_:1})]),_:1}),n("form",{onSubmit:R(q,["prevent"])},[n("div",Ne,[n("div",Pe,[s(e(C),{for:"name"},{default:a(()=>t[16]||(t[16]=[o("Name")])),_:1}),s(e(A),{id:"name",modelValue:e(l).name,"onUpdate:modelValue":t[1]||(t[1]=r=>e(l).name=r),placeholder:"Enter name",required:""},null,8,["modelValue"]),e(l).errors.name?(m(),c("div",Me,u(e(l).errors.name),1)):w("",!0)]),n("div",Ee,[s(e(C),{for:"description"},{default:a(()=>t[17]||(t[17]=[o("Description")])),_:1}),E(n("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=r=>e(l).description=r),rows:"3",class:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter description"},null,512),[[X,e(l).description]]),e(l).errors.description?(m(),c("div",je,u(e(l).errors.description),1)):w("",!0)]),n("div",ze,[s(e(C),{for:"image"},{default:a(()=>t[18]||(t[18]=[o("Image")])),_:1}),s(e(A),{type:"file",id:"image",onChange:B,accept:"image/*"}),e(l).errors.image?(m(),c("div",Fe,u(e(l).errors.image),1)):w("",!0)]),b.value?(m(),c("div",Le,[s(e(C),{for:"is_active"},{default:a(()=>t[19]||(t[19]=[o("Status")])),_:1}),E(n("select",{id:"is_active","onUpdate:modelValue":t[3]||(t[3]=r=>e(l).is_active=r),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},t[20]||(t[20]=[n("option",{value:!0},"Active",-1),n("option",{value:!1},"Inactive",-1)]),512),[[Y,e(l).is_active]]),e(l).errors.is_active?(m(),c("div",Te,u(e(l).errors.is_active),1)):w("",!0)])):w("",!0)]),s(e(oe),null,{default:a(()=>[s(e(v),{type:"button",variant:"outline",onClick:t[4]||(t[4]=r=>p.value=!1)},{default:a(()=>t[21]||(t[21]=[o("Cancel")])),_:1}),s(e(v),{type:"submit",disabled:e(l).processing},{default:a(()=>[o(u(b.value?"Update":"Save"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),_:1})],64))}};export{ms as default};
