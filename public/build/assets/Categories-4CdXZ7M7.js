import{r as N,C as U,c as p,o as f,a as s,u as e,m as L,w as o,b as l,d as i,e as D,f as v,F as E,g as W,t as u,n as O,h as G,i as z,v as H,j as J,k as K,W as k}from"./app-Cqil91VG.js";import{_ as Q}from"./AuthenticatedLayout-BY46rfGf.js";import{_ as R,a as F}from"./CardContent-C38U-JxF.js";import{_ as $}from"./Label-vvcqe4dp.js";import{_ as g}from"./index-ByeiqrB4.js";import{_ as X,a as Y,b as Z,c as ee,d as te}from"./DialogTitle-BRmklkjk.js";import{_ as se,a as oe,b as V,c as x,d as re,e as b,T as ae}from"./TableHeader-B7Eg4Tjt.js";import{_ as ie,a as le,b as ne}from"./CardTitle-DdvsLc0t.js";import{_ as de}from"./CardDescription-VILBcO-k.js";import{_ as I}from"./index-CcbIbunm.js";import{U as ue}from"./user-plus-DX44bDhL.js";import{A as fe,a as ce}from"./arrow-up-DXzzFhBD.js";import{S as me}from"./square-pen-D2HEYwwa.js";import"./utils-BRMhMjhB.js";import"./useForwardExpose-BoTcr0lo.js";import"./ApplicationLogo-F1zQLYZv.js";import"./chevron-down-GuiuOFqQ.js";import"./createLucideIcon-D9vdXTj9.js";import"./user-DdqHZhJJ.js";import"./mail-RWbnVo5P.js";import"./x-Dm7YFapm.js";import"./chevron-right-DofClSoD.js";const pe={class:"flex justify-between items-center"},ge={class:"rounded-md border"},_e={class:"flex items-center gap-2"},ve={class:"flex items-center gap-2"},be={class:"flex justify-end gap-2"},xe={class:"grid gap-4 py-4"},we={class:"grid gap-2"},ye={key:0,class:"text-sm text-red-500"},ke={class:"grid gap-2"},$e={key:0,class:"text-sm text-red-500"},Ce={class:"grid gap-2"},Se={key:0,class:"text-sm text-red-500"},je={key:0,class:"grid gap-2"},Ve={key:0,class:"text-sm text-red-500"},Re={__name:"Categories",props:{categories:Array},setup(w){const C=w,c=N(!1),_=N(!1),r=U({id:null,slug:"",name:"",description:"",is_active:!0}),y=()=>{r.reset(),r.clearErrors()},M=()=>{y(),_.value=!1,c.value=!0},T=n=>{y(),_.value=!0,r.id=n.id,r.name=n.name,r.slug=n.slug,r.description=n.description,r.is_active=n.is_active,c.value=!0},h=()=>{_.value?r.put(route("project-categories.update",r.id),{preserveScroll:!0,onSuccess:()=>{c.value=!1,y(),k.visit(route("project-categories.index"),{only:["categories"]})}}):r.post(route("project-categories.store"),{preserveScroll:!0,onSuccess:()=>{c.value=!1,y(),k.visit(route("project-categories.index"),{only:["categories"]})}})},B=n=>{confirm("Are you sure you want to delete this category?")&&U().delete(route("project-categories.destroy",n),{preserveScroll:!0,onSuccess:()=>{k.visit(route("project-categories.index"),{only:["categories"]})}})},A=async(n,t)=>{if(t==="up"&&n===0||t==="down"&&n===C.categories.length-1)return;const a=t==="up"?n-1:n+1,d=[...C.categories],m=d[n],S=d[a],P=m.order;m.order=S.order,S.order=P,d[n]=S,d[a]=m,C.categories=d;try{await K.post(route("project-categories.reorder"),{items:d.map((j,q)=>({id:j.id,order:q}))}),k.visit(route("project-categories.index"),{only:["categories"]})}catch(j){console.error("Failed to update order:",j)}};return(n,t)=>(f(),p(E,null,[s(e(L),{title:"Project Categories"}),s(Q,null,{default:o(()=>[s(e(ie),null,{default:o(()=>[s(e(le),{class:"pb-3"},{default:o(()=>[l("div",pe,[l("div",null,[s(e(ne),{class:"text-2xl"},{default:o(()=>t[6]||(t[6]=[i("Project Categories")])),_:1}),s(e(de),null,{default:o(()=>t[7]||(t[7]=[i("Manage your project categories")])),_:1})]),s(e(g),{onClick:M,variant:"default",class:"flex items-center gap-2"},{default:o(()=>[s(e(ue),{class:"w-4 h-4"}),t[8]||(t[8]=i(" Add New "))]),_:1})])]),_:1}),s(e(R),null,{default:o(()=>[l("div",ge,[s(e(se),null,{default:o(()=>[s(e(oe),null,{default:o(()=>[s(e(V),null,{default:o(()=>[s(e(x),{class:"w-4"},{default:o(()=>t[9]||(t[9]=[i("#")])),_:1}),s(e(x),null,{default:o(()=>t[10]||(t[10]=[i("Name")])),_:1}),s(e(x),null,{default:o(()=>t[11]||(t[11]=[i("Slug")])),_:1}),s(e(x),null,{default:o(()=>t[12]||(t[12]=[i("Status")])),_:1}),s(e(x),{class:"text-right"},{default:o(()=>t[13]||(t[13]=[i("Actions")])),_:1})]),_:1})]),_:1}),s(e(re),null,{default:o(()=>[(f(!0),p(E,null,W(w.categories,(a,d)=>(f(),D(e(V),{key:a.id},{default:o(()=>[s(e(b),null,{default:o(()=>[l("div",_e,[s(e(I),{variant:"outline"},{default:o(()=>[i(u(d+1),1)]),_:2},1024),l("div",ve,[s(e(g),{variant:"ghost",size:"icon",class:"h-6 w-6",disabled:d===0,onClick:m=>A(d,"up")},{default:o(()=>[s(e(fe),{class:"h-4 w-4"})]),_:2},1032,["disabled","onClick"]),s(e(g),{variant:"ghost",size:"icon",class:"h-6 w-6",disabled:d===w.categories.length-1,onClick:m=>A(d,"down")},{default:o(()=>[s(e(ce),{class:"h-4 w-4"})]),_:2},1032,["disabled","onClick"])])])]),_:2},1024),s(e(b),{class:"font-medium"},{default:o(()=>[i(u(a.name),1)]),_:2},1024),s(e(b),null,{default:o(()=>[i(u(a.slug),1)]),_:2},1024),s(e(b),null,{default:o(()=>[s(e(I),{class:O(a.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800")},{default:o(()=>[i(u(a.is_active?"Active":"Inactive"),1)]),_:2},1032,["class"])]),_:2},1024),s(e(b),{class:"text-right"},{default:o(()=>[l("div",be,[s(e(g),{variant:"outline",size:"icon",class:"h-8 w-8",onClick:m=>T(a)},{default:o(()=>[s(e(me),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),s(e(g),{variant:"outline",size:"icon",class:"h-8 w-8 text-red-500",onClick:m=>B(a.id)},{default:o(()=>[s(e(ae),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128)),w.categories.length===0?(f(),D(e(V),{key:0},{default:o(()=>[s(e(b),{colspan:"5",class:"text-center py-8 text-gray-500"},{default:o(()=>t[14]||(t[14]=[i(" No categories found. Try a different search or add a new category. ")])),_:1})]),_:1})):v("",!0)]),_:1})]),_:1})])]),_:1})]),_:1}),s(e(X),{open:c.value,"onUpdate:open":t[5]||(t[5]=a=>c.value=a)},{default:o(()=>[s(e(Y),{class:"max-w-lg"},{default:o(()=>[s(e(Z),null,{default:o(()=>[s(e(ee),null,{default:o(()=>[i(u(_.value?"Edit Category":"Add New Category"),1)]),_:1})]),_:1}),l("form",{onSubmit:G(h,["prevent"])},[l("div",xe,[l("div",we,[s(e($),{for:"name"},{default:o(()=>t[15]||(t[15]=[i("Name")])),_:1}),s(e(F),{id:"name",modelValue:e(r).name,"onUpdate:modelValue":t[0]||(t[0]=a=>e(r).name=a),placeholder:"Enter name",required:""},null,8,["modelValue"]),e(r).errors.name?(f(),p("div",ye,u(e(r).errors.name),1)):v("",!0)]),l("div",ke,[s(e($),{for:"slug"},{default:o(()=>t[16]||(t[16]=[i("Slug")])),_:1}),s(e(F),{id:"slug",modelValue:e(r).slug,"onUpdate:modelValue":t[1]||(t[1]=a=>e(r).slug=a),placeholder:"Enter slug"},null,8,["modelValue"]),t[17]||(t[17]=l("p",{class:"text-sm text-gray-500"},"Leave empty to generate automatically",-1)),e(r).errors.slug?(f(),p("div",$e,u(e(r).errors.slug),1)):v("",!0)]),l("div",Ce,[s(e($),{for:"description"},{default:o(()=>t[18]||(t[18]=[i("Description")])),_:1}),z(l("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=a=>e(r).description=a),rows:"3",class:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter description"},null,512),[[H,e(r).description]]),e(r).errors.description?(f(),p("div",Se,u(e(r).errors.description),1)):v("",!0)]),_.value?(f(),p("div",je,[s(e($),{for:"is_active"},{default:o(()=>t[19]||(t[19]=[i("Status")])),_:1}),z(l("select",{id:"is_active","onUpdate:modelValue":t[3]||(t[3]=a=>e(r).is_active=a),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},t[20]||(t[20]=[l("option",{value:!0},"Active",-1),l("option",{value:!1},"Inactive",-1)]),512),[[J,e(r).is_active]]),e(r).errors.is_active?(f(),p("div",Ve,u(e(r).errors.is_active),1)):v("",!0)])):v("",!0)]),s(e(te),null,{default:o(()=>[s(e(g),{type:"button",variant:"outline",onClick:t[4]||(t[4]=a=>c.value=!1)},{default:o(()=>t[21]||(t[21]=[i("Cancel")])),_:1}),s(e(g),{type:"submit",disabled:e(r).processing},{default:o(()=>[i(u(_.value?"Update":"Save"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),_:1})],64))}};export{Re as default};
