import{r as k,l as I,C as S,c as f,o as d,a as t,u as e,m as R,w as l,b as r,d as i,e as E,f as c,F as N,g as W,t as u,n as Q,h as G,i as A,j as D,W as h}from"./app-CxGffjrV.js";import{_ as H}from"./AuthenticatedLayout-CurjSLi0.js";import{_ as J,a as U}from"./CardContent-D5Gdh3PW.js";import{_ as b}from"./Label-D_2PHcEH.js";import{_ as y}from"./index-CP_ELKcA.js";import{_ as K,a as O,b as Y,c as Z,d as ee}from"./DialogTitle-xoE6WoTj.js";import{_ as te,a as se,b as V,c as p,d as le,e as m,T as ae}from"./TableHeader-jwFvmpOw.js";import{_ as oe,a as re,b as ie}from"./CardTitle-Cv41705o.js";import{_ as ne}from"./CardFooter-DO0lknO-.js";import{_ as C}from"./index-40vMANi6.js";import{U as ue}from"./user-plus-qv78p9UP.js";import{S as de}from"./search-DSpNWm4Y.js";import{M as me}from"./mail-DdbkTxDV.js";import{P as fe}from"./phone-TUflpRID.js";import{S as pe}from"./square-pen-DQ3vQ2fV.js";import"./utils-BRMhMjhB.js";import"./useForwardExpose-CwITNLfi.js";import"./ApplicationLogo-CJPLLxRO.js";import"./chevron-down-E9DgZaJ8.js";import"./createLucideIcon-Df_WcwoU.js";import"./user-BA0CyWSv.js";import"./x-DJFdPXTP.js";import"./chevron-right-DF9xh7cR.js";const _e={class:"flex justify-between items-center"},ce={class:"relative mb-6"},ve={class:"rounded-md border px-2"},ge={class:"flex items-center gap-1"},xe={class:"text-sm"},be={class:"flex items-center gap-1"},ye={class:"text-sm"},we={class:"text-xs text-gray-400"},$e={class:"flex justify-end gap-2"},ke={class:"text-sm text-gray-500"},Ue={class:"grid gap-4 py-4"},he={class:"grid gap-2"},Ve={key:0,class:"text-sm text-red-500"},Ce={class:"grid gap-2"},Se={key:0,class:"text-sm text-red-500"},Ee={class:"grid gap-2"},Ne={key:0,class:"text-sm text-red-500"},Ae={class:"grid gap-2"},De={key:0,class:"text-sm text-red-500"},Le={key:0,class:"grid gap-2"},Xe={key:0,class:"text-sm text-red-500"},at={__name:"Index",props:{users:Array},setup(L){const w=L,x=k(""),v=k([]),X=()=>{x.value?v.value=w.users.filter(n=>n.name.toLowerCase().includes(x.value.toLowerCase())||n.email.toLowerCase().includes(x.value.toLowerCase())):v.value=w.users};I(()=>{v.value=w.users});const _=k(!1),g=k(!1),a=S({id:null,name:"",email:"",phone:"",role:"",status:""}),$=()=>{a.reset(),a.clearErrors()},M=()=>{$(),g.value=!1,_.value=!0},P=n=>{$(),g.value=!0,a.id=n.id,a.name=n.name,a.email=n.email,a.phone=n.phone,a.status=n.status,a.role=n.role,_.value=!0},F=()=>{g.value?a.put(route("users.update",a.id),{onSuccess:()=>{_.value=!1,$(),h.visit(route("users.index"),{only:["users"]})},onError:n=>{console.log("Validation errors:",n)}}):a.post(route("users.store"),{onSuccess:()=>{_.value=!1,$(),h.visit(route("users.index"),{only:["users"]})},onError:n=>{console.log("Validation errors:",n)}})},j=n=>{confirm("Are you sure you want to delete this user?")&&S().delete(route("users.destroy",n),{onSuccess:()=>{h.visit(route("users.index"),{only:["users"]})}})},q=n=>{switch(n){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},B=n=>n?new Date(n).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never";return(n,s)=>(d(),f(N,null,[t(e(R),{title:"Users"}),t(H,null,{default:l(()=>[t(e(oe),null,{default:l(()=>[t(e(re),{class:"pb-3"},{default:l(()=>[r("div",_e,[r("div",null,[t(e(ie),{class:"text-2xl"},{default:l(()=>s[8]||(s[8]=[i("Users Management")])),_:1})]),t(e(y),{onClick:M,variant:"default",class:"flex items-center gap-2"},{default:l(()=>[t(e(ue),{class:"w-4 h-4"}),s[9]||(s[9]=i(" Add User "))]),_:1})])]),_:1}),t(e(J),null,{default:l(()=>[r("div",ce,[t(e(de),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),t(e(U),{modelValue:x.value,"onUpdate:modelValue":s[0]||(s[0]=o=>x.value=o),onInput:X,placeholder:"Search users by name or email...",class:"pl-10"},null,8,["modelValue"])]),r("div",ve,[t(e(te),null,{default:l(()=>[t(e(se),null,{default:l(()=>[t(e(V),null,{default:l(()=>[t(e(p),{class:"w-4"},{default:l(()=>s[10]||(s[10]=[i("#")])),_:1}),t(e(p),null,{default:l(()=>s[11]||(s[11]=[i("Name")])),_:1}),t(e(p),null,{default:l(()=>s[12]||(s[12]=[i("Email")])),_:1}),t(e(p),null,{default:l(()=>s[13]||(s[13]=[i("Phone")])),_:1}),t(e(p),null,{default:l(()=>s[14]||(s[14]=[i("Role")])),_:1}),t(e(p),null,{default:l(()=>s[15]||(s[15]=[i("Last Login")])),_:1}),t(e(p),null,{default:l(()=>s[16]||(s[16]=[i("Status")])),_:1}),t(e(p),{class:"text-right"},{default:l(()=>s[17]||(s[17]=[i("Actions")])),_:1})]),_:1})]),_:1}),t(e(le),null,{default:l(()=>[(d(!0),f(N,null,W(v.value,(o,T)=>(d(),E(e(V),{key:o.id},{default:l(()=>[t(e(m),null,{default:l(()=>[t(e(C),{variant:"outline"},{default:l(()=>[i(u(T+1),1)]),_:2},1024)]),_:2},1024),t(e(m),{class:"font-medium"},{default:l(()=>[i(u(o.name),1)]),_:2},1024),t(e(m),null,{default:l(()=>[r("div",ge,[t(e(me),{class:"w-4 h-4 text-gray-500"}),r("span",xe,u(o.email),1)])]),_:2},1024),t(e(m),null,{default:l(()=>[r("div",be,[t(e(fe),{class:"w-4 h-4 text-gray-500"}),r("span",ye,u(o.phone),1)])]),_:2},1024),t(e(m),null,{default:l(()=>[t(e(C),{variant:"outline"},{default:l(()=>[i(u(o.role_label),1)]),_:2},1024)]),_:2},1024),t(e(m),null,{default:l(()=>[r("div",we,u(B(o.last_login)),1)]),_:2},1024),t(e(m),null,{default:l(()=>[t(e(C),{class:Q(q(o.status))},{default:l(()=>[i(u(o.status.charAt(0).toUpperCase()+o.status.slice(1)),1)]),_:2},1032,["class"])]),_:2},1024),t(e(m),{class:"text-right"},{default:l(()=>[r("div",$e,[t(e(y),{variant:"outline",size:"icon",class:"h-8 w-8",onClick:z=>P(o)},{default:l(()=>[t(e(pe),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),t(e(y),{variant:"outline",size:"icon",class:"h-8 w-8 text-red-500",onClick:z=>j(o.id)},{default:l(()=>[t(e(ae),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128)),v.value.length===0?(d(),E(e(V),{key:0},{default:l(()=>[t(e(m),{colspan:"7",class:"text-center py-8 text-gray-500"},{default:l(()=>s[18]||(s[18]=[i(" No users found. Try a different search or add a new user. ")])),_:1})]),_:1})):c("",!0)]),_:1})]),_:1})])]),_:1}),t(e(ne),null,{default:l(()=>[r("div",ke," Showing "+u(v.value.length)+" out of "+u(w.users.length)+" users ",1)]),_:1})]),_:1}),t(e(K),{open:_.value,"onUpdate:open":s[7]||(s[7]=o=>_.value=o)},{default:l(()=>[t(e(O),{class:"max-w-md"},{default:l(()=>[t(e(Y),null,{default:l(()=>[t(e(Z),null,{default:l(()=>[i(u(g.value?"Edit User":"Add New User"),1)]),_:1})]),_:1}),r("form",{onSubmit:G(F,["prevent"])},[r("div",Ue,[r("div",he,[t(e(b),{for:"name"},{default:l(()=>s[19]||(s[19]=[i("Full Name")])),_:1}),t(e(U),{id:"name",modelValue:e(a).name,"onUpdate:modelValue":s[1]||(s[1]=o=>e(a).name=o),placeholder:"Enter user's full name",required:""},null,8,["modelValue"]),e(a).errors.name?(d(),f("div",Ve,u(e(a).errors.name),1)):c("",!0)]),r("div",Ce,[t(e(b),{for:"email"},{default:l(()=>s[20]||(s[20]=[i("Email Address")])),_:1}),t(e(U),{id:"email",type:"email",modelValue:e(a).email,"onUpdate:modelValue":s[2]||(s[2]=o=>e(a).email=o),placeholder:"email@example.com",required:""},null,8,["modelValue"]),e(a).errors.email?(d(),f("div",Se,u(e(a).errors.email),1)):c("",!0)]),r("div",Ee,[t(e(b),{for:"phone"},{default:l(()=>s[21]||(s[21]=[i("Phone Number")])),_:1}),t(e(U),{id:"phone",modelValue:e(a).phone,"onUpdate:modelValue":s[3]||(s[3]=o=>e(a).phone=o),placeholder:"+256 7XX XXX XXX",required:""},null,8,["modelValue"]),e(a).errors.phone?(d(),f("div",Ne,u(e(a).errors.phone),1)):c("",!0)]),r("div",Ae,[t(e(b),{for:"role"},{default:l(()=>s[22]||(s[22]=[i("Role")])),_:1}),A(r("select",{id:"role","onUpdate:modelValue":s[4]||(s[4]=o=>e(a).role=o),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},s[23]||(s[23]=[r("option",{value:"",disabled:""},"Select user role",-1),r("option",{value:"admin"},"Administrator",-1),r("option",{value:"editor"},"Editor",-1)]),512),[[D,e(a).role]]),e(a).errors.role?(d(),f("div",De,u(e(a).errors.role),1)):c("",!0)]),g.value?(d(),f("div",Le,[t(e(b),{for:"status"},{default:l(()=>s[24]||(s[24]=[i("Status")])),_:1}),A(r("select",{id:"status","onUpdate:modelValue":s[5]||(s[5]=o=>e(a).status=o),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},s[25]||(s[25]=[r("option",{value:"active"},"Active",-1),r("option",{value:"inactive"},"Inactive",-1)]),512),[[D,e(a).status]]),e(a).errors.status?(d(),f("div",Xe,u(e(a).errors.status),1)):c("",!0)])):c("",!0)]),t(e(ee),null,{default:l(()=>[t(e(y),{type:"button",variant:"outline",onClick:s[6]||(s[6]=o=>_.value=!1)},{default:l(()=>s[26]||(s[26]=[i("Cancel")])),_:1}),t(e(y),{type:"submit",disabled:e(a).processing},{default:l(()=>[i(u(g.value?"Update User":"Save User"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),_:1})],64))}};export{at as default};
