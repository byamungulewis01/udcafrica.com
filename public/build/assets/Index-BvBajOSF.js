import{r as S,l as L,c as h,o as f,a as t,u as e,m as T,w as s,b as i,d as o,P as B,e as w,f as $,F as I,g as j,t as d,n as D,k as F,C as M,W as U}from"./app-C0-T-36n.js";import{_ as W}from"./AuthenticatedLayout-DjArvK8J.js";import{_ as q,a as E}from"./CardContent-DAZ2xV6d.js";import{_ as v}from"./index-Cjhje39G.js";import{_ as O,a as Q,b as k,c as _,d as G,e as m,T as H}from"./TableHeader-9UHZ6L1T.js";import{_ as J,a as K,b as R}from"./CardTitle-C2ETG0I7.js";import{_ as X}from"./CardDescription-DqR5LHvC.js";import{_ as Y}from"./CardFooter-BYmfbov_.js";import{_ as y}from"./index-CJiRt30R.js";import{P as Z}from"./plus-ChwUI5pv.js";import{S as ee}from"./search-DTR6v8tm.js";import{A as te,a as se}from"./arrow-up-B0-yL12r.js";import{I as le}from"./image-BP2o-9e-.js";import{S as ae}from"./square-pen-CagrnjD4.js";import"./utils-BRMhMjhB.js";import"./useForwardExpose-BgPDl6LL.js";import"./ApplicationLogo-C0XSErH8.js";import"./chevron-down-Bdyhgnkp.js";import"./createLucideIcon-DDnbf8rl.js";import"./user-CBnZMU8B.js";import"./mail-RwgjtG3d.js";import"./x-CLoYGXes.js";import"./chevron-right-DtGx2hEr.js";const oe={class:"flex justify-between items-center"},re={class:"relative mb-6"},ue={class:"rounded-md border"},ne={class:"flex items-center gap-2"},ie={class:"flex flex-col"},de={class:"w-16 h-16 rounded-md overflow-hidden"},fe=["src","alt"],me={key:1,class:"w-full h-full bg-gray-100 flex items-center justify-center"},_e={class:"font-medium"},ce={class:"text-sm text-gray-500"},pe={class:"flex justify-end gap-2"},ge={class:"text-sm text-gray-500"},Ue={__name:"Index",props:{blogs:Array},setup(P){const p=P,g=S(""),n=S([]),A=()=>{g.value?n.value=p.blogs.filter(r=>{var l;return r.title.toLowerCase().includes(g.value.toLowerCase())||((l=r.author)==null?void 0:l.toLowerCase().includes(g.value.toLowerCase()))}):n.value=p.blogs};L(()=>{n.value=p.blogs});const N=r=>{confirm("Are you sure you want to delete this blog post?")&&M().delete(route("blogs.destroy",r),{preserveScroll:!0,onSuccess:()=>{U.visit(route("blogs.index"),{only:["blogs"]})}})},C=async(r,l)=>{if(l==="up"&&r===0||l==="down"&&r===n.value.length-1)return;const a=l==="up"?r-1:r+1,u=[...n.value],c=u[r],b=u[a],V=c.order;c.order=b.order,b.order=V,u[r]=b,u[a]=c,n.value=u;try{await F.post(route("blogs.reorder"),{items:u.map((x,z)=>({id:x.id,order:z}))})}catch(x){console.error("Failed to update order:",x),n.value=p.blogs}};return(r,l)=>(f(),h(I,null,[t(e(T),{title:"Blog Management"}),t(W,null,{default:s(()=>[t(e(J),null,{default:s(()=>[t(e(K),{class:"pb-3"},{default:s(()=>[i("div",oe,[i("div",null,[t(e(R),{class:"text-2xl"},{default:s(()=>l[1]||(l[1]=[o("Blog Management")])),_:1}),t(e(X),null,{default:s(()=>l[2]||(l[2]=[o("Manage your blog posts")])),_:1})]),t(e(B),{href:r.route("blogs.create")},{default:s(()=>[t(e(v),{variant:"default",class:"flex items-center gap-2"},{default:s(()=>[t(e(Z),{class:"w-4 h-4"}),l[3]||(l[3]=o(" New Post "))]),_:1})]),_:1},8,["href"])])]),_:1}),t(e(q),null,{default:s(()=>[i("div",re,[t(e(ee),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),t(e(E),{modelValue:g.value,"onUpdate:modelValue":l[0]||(l[0]=a=>g.value=a),onInput:A,placeholder:"Search by title or author...",class:"pl-10"},null,8,["modelValue"])]),i("div",ue,[t(e(O),null,{default:s(()=>[t(e(Q),null,{default:s(()=>[t(e(k),null,{default:s(()=>[t(e(_),{class:"w-4"},{default:s(()=>l[4]||(l[4]=[o("#")])),_:1}),t(e(_),null,{default:s(()=>l[5]||(l[5]=[o("Image")])),_:1}),t(e(_),null,{default:s(()=>l[6]||(l[6]=[o("Title")])),_:1}),t(e(_),null,{default:s(()=>l[7]||(l[7]=[o("Author")])),_:1}),t(e(_),null,{default:s(()=>l[8]||(l[8]=[o("Status")])),_:1}),t(e(_),null,{default:s(()=>l[9]||(l[9]=[o("Published")])),_:1}),t(e(_),{class:"text-right"},{default:s(()=>l[10]||(l[10]=[o("Actions")])),_:1})]),_:1})]),_:1}),t(e(G),null,{default:s(()=>[(f(!0),h(I,null,j(n.value,(a,u)=>(f(),w(e(k),{key:a.id},{default:s(()=>[t(e(m),null,{default:s(()=>[i("div",ne,[t(e(y),{variant:"outline"},{default:s(()=>[o(d(u+1),1)]),_:2},1024),i("div",ie,[t(e(v),{variant:"ghost",size:"icon",class:"h-6 w-6",disabled:u===0,onClick:c=>C(u,"up")},{default:s(()=>[t(e(te),{class:"h-4 w-4"})]),_:2},1032,["disabled","onClick"]),t(e(v),{variant:"ghost",size:"icon",class:"h-6 w-6",disabled:u===n.value.length-1,onClick:c=>C(u,"down")},{default:s(()=>[t(e(se),{class:"h-4 w-4"})]),_:2},1032,["disabled","onClick"])])])]),_:2},1024),t(e(m),null,{default:s(()=>[i("div",de,[a.featured_image?(f(),h("img",{key:0,src:a.featured_image,alt:a.title,class:"w-full h-full object-cover"},null,8,fe)):(f(),h("div",me,[t(e(le),{class:"w-8 h-8 text-gray-400"})]))])]),_:2},1024),t(e(m),null,{default:s(()=>[i("div",_e,d(a.title),1),i("div",ce,d(a.reading_time),1),a.category?(f(),w(e(y),{key:0,variant:"outline"},{default:s(()=>[o(d(a.category.name),1)]),_:2},1024)):$("",!0)]),_:2},1024),t(e(m),null,{default:s(()=>[o(d(a.author),1)]),_:2},1024),t(e(m),null,{default:s(()=>[t(e(y),{class:D(a.is_published?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800")},{default:s(()=>[o(d(a.is_published?"Published":"Draft"),1)]),_:2},1032,["class"]),a.is_featured?(f(),w(e(y),{key:0,class:"ml-1 bg-blue-100 text-blue-800"},{default:s(()=>l[11]||(l[11]=[o(" Featured ")])),_:1})):$("",!0)]),_:2},1024),t(e(m),null,{default:s(()=>[o(d(a.formatted_published_at||"Not published"),1)]),_:2},1024),t(e(m),{class:"text-right"},{default:s(()=>[i("div",pe,[t(e(B),{href:r.route("blogs.edit",a.id)},{default:s(()=>[t(e(v),{variant:"outline",size:"icon",class:"h-8 w-8"},{default:s(()=>[t(e(ae),{class:"h-4 w-4"})]),_:1})]),_:2},1032,["href"]),t(e(v),{variant:"outline",size:"icon",class:"h-8 w-8 text-red-500",onClick:c=>N(a.id)},{default:s(()=>[t(e(H),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128)),n.value.length===0?(f(),w(e(k),{key:0},{default:s(()=>[t(e(m),{colspan:"8",class:"text-center py-8 text-gray-500"},{default:s(()=>l[12]||(l[12]=[o(" No blog posts found. Try a different search or create a new post. ")])),_:1})]),_:1})):$("",!0)]),_:1})]),_:1})])]),_:1}),t(e(Y),null,{default:s(()=>[i("div",ge," Showing "+d(n.value.length)+" out of "+d(p.blogs.length)+" blog posts ",1)]),_:1})]),_:1})]),_:1})],64))}};export{Ue as default};
